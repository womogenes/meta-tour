<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="/" />
    {% include 'common/head.html' %}

    <title>View tour</title>

    <link rel="stylesheet" href="css/single-tour.css" />
    <script src="js/single-tour.js" defer></script>
  </head>

  <body>
    {% include 'common/navbar.html' %}
    
    <main class="container is-max-desktop">

      {% if tour is not none %}
      <div class="mb-5">
        <h1 class="title is-1">{{tour.title}}</h1>
        <p class="subtitle">{{tour.description}}</p>
      </div>

      <p><b>Tour ID</b></</p>
      <p><code>{{tour.tour_id}}</code></p>
      <br>

      <p><b>Creation date</b></</p>
      <p>{{tour.timestamp.strftime('%B %d, %Y at %I:%M %p')}}</p>
      <br>

      <p><b>Files</b></p>
      {% for file in tour.files %}
      <img src="{{tour.files[file]}}" />
      {% endfor %}
      <br><br>

      <p><b>Data</b></p>
      <a href="/tour-data/{{tour.tour_id}}" download="tour_data.{{tour.tour_id}}.json">Download JSON</a>
      <span>({{readings_size}})</span>

      {% else %}
      <h1 class="title is-1">Tour not fully processed</h1>
      <article class="message is-danger container">
        <div class="message-body">
          <span id="unprocessed">This tour hasn't been fully processed yet. This page will refresh every 2 seconds.</span>
        </div>
      </article>
      {% endif %}
    </main>
  </body>
</html>
